jQuery(function(a){var b=function(b){var c=/^[0-9]{5}-[0-9]{3}$/;return b=a.trim(b),!!c.test(b)},c=function(c,d,e,f){if("undefined"==typeof d&&(d="billing"),"undefined"!=typeof e&&"undefined"!=typeof f){if(console.log("1"),console.log("force_show: "+e),console.log("fields: "+f),e&&f){console.log("1.1");for(var g=f.length-1;g>=0;g--)f[g].addClass("visivel")}else if(!e&&f){console.log("1.2");for(var h=f.length-1;h>=0;i--)f[h].removeClass("visivel")}}else b(c)?(console.log("key: "+d),console.log("2"),a("#"+d+"_address_1_field, #"+d+"_number_field, #"+d+"_address_2_field, #"+d+"_neighborhood_field, #"+d+"_city_field, #"+d+"_state_field").addClass("visivel")):(console.log("key: "+d),console.log("3"),a("#"+d+"_address_1_field, #"+d+"_number_field, #"+d+"_address_2_field, #"+d+"_neighborhood_field, #"+d+"_city_field, #"+d+"_state_field").removeClass("visivel"))},d=function(a){return a.indexOf(" ")>=0},e=function(){a(".nome-completo").each(function(){var b=a(this).find("input"),c=b.closest(".form-row"),e=b.closest(".clear").find(".primeiro-nome").find("input"),g=b.closest(".clear").find(".sobrenome").find("input");a(b).keyup(function(){var h="",i="";b.attr("class");val=a.trim(a(this).val()),d(val)?(h=val.substr(0,val.indexOf(" ")),i=val.substr(val.indexOf(" ")+1)):h=val,e.val(a.trim(h)),g.val(a.trim(i)),c.hasClass("invalido")&&f(b)}),b.blur(function(){f(b)})})},f=function(b){var c=b.closest(".form-row");val=a.trim(b.val()),d(val)?c.removeClass("invalido"):c.addClass("invalido")},g=function(){e()},h=function(b){if(a("#"+b+"_postcode").length){var d=a("#"+b+"_postcode").val().replace(".","").replace("-",""),e=a("#"+b+"_country").val();a("#"+b+"_address_1").val();if(""!==d&&8===d.length&&"BR"===e){var f=a.ajax({type:"GET",url:"//viacep.com.br/ws/"+d+"/json/",dataType:"jsonp",crossDomain:!0,contentType:"application/json"});f.done(function(d){d.logradouro?a("#"+b+"_address_1").val(d.logradouro).attr("readonly","readonly").change().closest(".form-row").addClass("disabled-input"):a("#"+b+"_address_1").attr("readonly",!1).val("").change().closest(".form-row").removeClass("disabled-input"),d.logradouro?a("#"+b+"_neighborhood").val(d.bairro).attr("readonly","readonly").change().closest(".form-row").addClass("disabled-input"):a("#"+b+"_neighborhood").attr("readonly",!1).val("").change().closest(".form-row").removeClass("disabled-input"),""!==d.localidade?a("#"+b+"_city").val(d.localidade).change():c(val,b,!0,array(a("#"+b+"_city"))),""!==d.uf?(a("#"+b+"_state option:selected").attr("selected",!1).change(),a("#"+b+'_state option[value="'+d.uf+'"]').attr("selected","selected").change(),a("#"+b+"_state").val(d.uf).change()):c(val,b,!0,array(a("#"+b+"_state"))),a("#"+b+"_state").trigger("liszt:updated").trigger("chosen:updated"),a("#"+b+"_number").focus(),a(".cep-notice").length&&a(".cep-notice").remove()}).fail(function(c,d,e){if(!a(".cep-notice").length){var f=a('<div class="cep-notice"><div class="woocommerce-messages alert-color"><div class="message-wrapper"><ul class="woocommerce-error"><li><div class="message-container container"><span class="message-icon icon-close"><strong>CEP</strong> não encontrado. Digite outro CEP ou preencha manualmente o restante das informações do endereço.</span></div></li></ul></div></div></div>');a("#"+b+"_postcode").focus(),a("#"+b+"_postcode").closest("form.checkout.woocommerce-checkout").prepend(f)}})}}},j=function(){h("billing"),billing_cep_input=a("#billing_postcode"),shipping_cep_input=a("#shipping_postcode"),c(billing_cep_input.val(),"billing"),billing_cep_input.keyup(function(){var b=a(this).val();c(b,"billing"),9===b.length&&(h("billing"),a("body").trigger("update_checkout"))}),c(shipping_cep_input.val(),"shipping"),shipping_cep_input.keyup(function(){var b=a(this).val();c(b,"shipping"),9===b.length&&(h("shipping"),a("body").trigger("update_checkout"))}),a(".address-field").find("input").each(function(){var b=a(this);b.keydown(function(a){"billing_postcode"===b.attr("id")||b.closest(".address-field").hasClass("visivel")||a.preventDefault()})})},k=function(){a(".cep-mask").find("input").mask("00000-000"),a(".cep-mask-input").mask("00000-000"),a("#billing_postcode").mask("00000-000"),a("#shipping_postcode").mask("00000-000"),a(".fone-mask-input").mask("(00) 90000-0000")},l=function(){a(".disabled-input").each(function(){var b=a(this).find("input, textarea");b.length&&b.attr("readonly","readonly")})},m=function(){a("#billing_persontype").on("change",function(){a(this).val();if(a("#billing_ie").length>0){var b=a("#billing_ie"),c=b.closest(".form-row "),d=c.closest(".woocommerce-billing-fields__field-wrapper");d.find(".form-row ").each(function(b){if(a(this).index()>c.index()){var d=a(this),e="";d.hasClass("form-row-first")?(e=d.attr("class"),e=e.replace("first","last"),d.attr("class",e)):d.hasClass("form-row-last")&&(e=d.attr("class"),e=e.replace("last","first"),d.attr("class",e))}})}})},n=function(){var b=a(".mobile-sidebar .sidebar-menu .nav");b.find("a").each(function(){var b=a(this),c=b.next(".toggle");c.length>0&&"#"===b.attr("href")&&b.off().click(function(a){c.click(),a.preventDefault()})})};a(document).ready(function(){k(),j(),g(),l(),m(),n()})});