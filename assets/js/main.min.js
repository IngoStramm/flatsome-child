jQuery(function(a){var b=function(b){var c=/^[0-9]{5}-[0-9]{3}$/;return b=a.trim(b),!!c.test(b)},c=function(c,d,e){if("undefined"!=typeof d&&"undefined"!=typeof e){if(console.log("1"),console.log("force_show: "+d),console.log("fields: "+e),d&&e){console.log("1.1");for(var f=e.length-1;f>=0;f--)e[f].addClass("visivel")}else if(!d&&e){console.log("1.2");for(var g=e.length-1;g>=0;i--)e[g].removeClass("visivel")}}else b(c)?(console.log("2"),a("#billing_address_1_field, #billing_number_field, #billing_address_2_field, #billing_neighborhood_field, #billing_city_field, #billing_state_field").addClass("visivel")):(console.log("3"),a("#billing_address_1_field, #billing_number_field, #billing_address_2_field, #billing_neighborhood_field, #billing_city_field, #billing_state_field").removeClass("visivel"))},d=function(a){return a.indexOf(" ")>=0},e=function(){a(".nome-completo").each(function(){var b=a(this).find("input"),c=b.closest(".form-row"),e=b.closest("form").find(".primeiro-nome").find("input"),g=b.closest("form").find(".sobrenome").find("input");a(b).keyup(function(){var h="",i="";b.attr("class");val=a.trim(a(this).val()),d(val)?(h=val.substr(0,val.indexOf(" ")),i=val.substr(val.indexOf(" ")+1)):h=val,e.val(a.trim(h)),g.val(a.trim(i)),c.hasClass("invalido")&&f(b)}),b.blur(function(){f(b)})})},f=function(b){var c=b.closest(".form-row");val=a.trim(b.val()),d(val)?c.removeClass("invalido"):c.addClass("invalido")},g=function(){e()},h=function(b){if(a("#"+b+"_postcode").length){var d=a("#"+b+"_postcode").val().replace(".","").replace("-",""),e=a("#"+b+"_country").val();a("#"+b+"_address_1").val();if(""!==d&&8===d.length&&"BR"===e){var f=a.ajax({type:"GET",url:"//correiosapi.apphb.com/cep/"+d,dataType:"jsonp",crossDomain:!0,contentType:"application/json"});f.done(function(d){""!==d.tipoDeLogradouro?a("#"+b+"_address_1").val(d.tipoDeLogradouro+" "+d.logradouro).change():a("#"+b+"_address_1").val(d.logradouro).change(),a("#"+b+"_neighborhood").val(d.bairro).change(),""!==d.cidade?a("#"+b+"_city").val(d.cidade).change():c(val,!0,array(a("#"+b+"_city"))),""!==d.estado?(a("#"+b+"_state option:selected").attr("selected",!1).change(),a("#"+b+'_state option[value="'+d.estado+'"]').attr("selected","selected").change(),a("#"+b+"_state").val(d.estado).change()):c(val,!0,array(a("#"+b+"_state"))),a("#"+b+"_state").trigger("liszt:updated").trigger("chosen:updated"),a("#billing_number").focus(),a(".cep-notice").length&&a(".cep-notice").remove()}).fail(function(b,c,d){if(!a(".cep-notice").length){var e=a('<div class="cep-notice"><div class="woocommerce-messages alert-color"><div class="message-wrapper"><ul class="woocommerce-error"><li><div class="message-container container"><span class="message-icon icon-close"><strong>CEP</strong> não encontrado. Digite outro CEP ou preencha manualmente o restante das informações do endereço.</span></div></li></ul></div></div></div>');a("#billing_postcode").focus(),a("#billing_postcode").closest("form.checkout.woocommerce-checkout").prepend(e)}})}}},j=function(){h("billing"),cep_input=a("#billing_postcode"),c(cep_input.val()),cep_input.keyup(function(){var b=a(this).val();c(b),9===b.length&&(h("billing"),a("body").trigger("update_checkout"))}),a(".address-field").find("input").each(function(){var b=a(this);b.keydown(function(a){"billing_postcode"===b.attr("id")||b.closest(".address-field").hasClass("visivel")||a.preventDefault()})})},k=function(){a(".cep-mask").find("input").mask("00000-000"),a(".cep-mask-input").mask("00000-000")},l=function(){a(".disabled-input").each(function(){var b=a(this).find("input, textarea");b.length&&b.attr("readonly","readonly")})},m=function(){a("#billing_persontype").on("change",function(){a(this).val();if(a("#billing_ie").length>0){var b=a("#billing_ie"),c=b.closest(".form-row "),d=c.closest(".woocommerce-billing-fields__field-wrapper");d.find(".form-row ").each(function(b){if(a(this).index()>c.index()){var d=a(this),e="";d.hasClass("form-row-first")?(e=d.attr("class"),e=e.replace("first","last"),d.attr("class",e)):d.hasClass("form-row-last")&&(e=d.attr("class"),e=e.replace("last","first"),d.attr("class",e))}})}})};a(document).ready(function(){k(),j(),g(),l(),m()})});